(function($) {
$.fn.dataTable.moment = function ( format, locale ) {
	var types = $.fn.dataTable.ext.type;
	types.detect.unshift( function ( d ) {
		if ( d === '' || d === null ) {
			return 'moment-'+format;
		}
		return moment( d.replace ? d.replace(/<.*?>/g, '') : d, format, locale, true ).isValid() ?
			'moment-'+format :
			null;
	} );
	types.order[ 'moment-'+format+'-pre' ] = function ( d ) {
		return d === '' || d === null ?
			-Infinity :
			parseInt( moment( d.replace ? d.replace(/<.*?>/g, '') : d, format, locale, true ).format( 'x' ), 10 );
	};
};
}(jQuery));