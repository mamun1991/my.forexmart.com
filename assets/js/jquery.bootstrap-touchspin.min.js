(function(e){function t(n,t){return e.map(n,function(e){return e+".touchspin_"+t})}var n=0;e.fn.TouchSpin=function(z){if("destroy"===z)this.each(function(){var h=e(this).data();e(document).off(t("mouseup touchend touchcancel mousemove touchmove scroll scrollstart".split(" "),h.spinnerid).join(" "))});else{var G={min:0,max:100,initval:"",replacementval:"",step:1,decimals:0,stepinterval:100,forcestepdivisibility:"round",stepintervaldelay:500,verticalbuttons:!1,verticalupclass:"glyphicon glyphicon-chevron-up",
  verticaldownclass:"glyphicon glyphicon-chevron-down",prefix:"",postfix:"",prefix_extraclass:"",postfix_extraclass:"",booster:!0,boostat:10,maxboostedstep:!1,mousewheel:!0,buttondown_class:"btn btn-default",buttonup_class:"btn btn-default",buttondown_txt:"-",buttonup_txt:"+"},H={min:"min",max:"max",initval:"init-val",replacementval:"replacement-val",step:"step",decimals:"decimals",stepinterval:"step-interval",verticalbuttons:"vertical-buttons",verticalupclass:"vertical-up-class",verticaldownclass:"vertical-down-class",
  forcestepdivisibility:"force-step-divisibility",stepintervaldelay:"step-interval-delay",prefix:"prefix",postfix:"postfix",prefix_extraclass:"prefix-extra-class",postfix_extraclass:"postfix-extra-class",booster:"booster",boostat:"boostat",maxboostedstep:"max-boosted-step",mousewheel:"mouse-wheel",buttondown_class:"button-down-class",buttonup_class:"button-up-class",buttondown_txt:"button-down-txt",buttonup_txt:"button-up-txt"};return this.each(function(){var h,l,m,x,A;function I(){var a={};e.each(H,
    function(b,e){var d="bts-"+e+"";c.is("[data-"+d+"]")&&(a[b]=c.data(d))});return a}function J(){var a=c.val(),y=c.parent();""!==a&&(a=Number(a).toFixed(b.decimals));c.data("initvalue",a).val(a);c.addClass("form-control");if(y.hasClass("input-group")){y.addClass("bootstrap-touchspin");var d=c.prev(),a=c.next(),f,g='<span class="input-group-addon bootstrap-touchspin-prefix">'+b.prefix+"</span>",h='<span class="input-group-addon bootstrap-touchspin-postfix">'+b.postfix+"</span>";d.hasClass("input-group-btn")?
    (f='<button class="'+b.buttondown_class+' bootstrap-touchspin-down" type="button">'+b.buttondown_txt+"</button>",d.append(f)):(f='<span class="input-group-btn"><button class="'+b.buttondown_class+' bootstrap-touchspin-down" type="button">'+b.buttondown_txt+"</button></span>",e(f).insertBefore(c));a.hasClass("input-group-btn")?(d='<button class="'+b.buttonup_class+' bootstrap-touchspin-up" type="button">'+b.buttonup_txt+"</button>",a.prepend(d)):(d='<span class="input-group-btn"><button class="'+b.buttonup_class+
    ' bootstrap-touchspin-up" type="button">'+b.buttonup_txt+"</button></span>",e(d).insertAfter(c));e(g).insertBefore(c);e(h).insertAfter(c);k=y}else k=e(b.verticalbuttons?'<div class="input-group bootstrap-touchspin"><span class="input-group-addon bootstrap-touchspin-prefix">'+b.prefix+'</span><span class="input-group-addon bootstrap-touchspin-postfix">'+b.postfix+'</span><span class="input-group-btn-vertical"><button class="'+b.buttondown_class+' bootstrap-touchspin-up" type="button"><i class="'+b.verticalupclass+
'"></i></button><button class="'+b.buttonup_class+' bootstrap-touchspin-down" type="button"><i class="'+b.verticaldownclass+'"></i></button></span></div>':'<div class="input-group bootstrap-touchspin"><span class="input-group-btn"><button class="'+b.buttondown_class+' bootstrap-touchspin-down" type="button">'+b.buttondown_txt+'</button></span><span class="input-group-addon bootstrap-touchspin-prefix">'+b.prefix+'</span><span class="input-group-addon bootstrap-touchspin-postfix">'+b.postfix+'</span><span class="input-group-btn"><button class="'+
b.buttonup_class+' bootstrap-touchspin-up" type="button">'+b.buttonup_txt+"</button></span></div>").insertBefore(c),e(".bootstrap-touchspin-prefix",k).after(c),c.hasClass("input-sm")?k.addClass("input-group-sm"):c.hasClass("input-lg")&&k.addClass("input-group-lg")}function K(){c.on("keydown",function(a){var b=a.keyCode||a.which;38===b?("up"!==g&&(p(),u()),a.preventDefault()):40===b&&("down"!==g&&(q(),v()),a.preventDefault())});c.on("keyup",function(a){a=a.keyCode||a.which;38===a?f():40===a&&f()});
  c.on("blur",function(){w()});h.on("keydown",function(a){var b=a.keyCode||a.which;if(32===b||13===b)"down"!==g&&(q(),v()),a.preventDefault()});h.on("keyup",function(a){a=a.keyCode||a.which;32!==a&&13!==a||f()});l.on("keydown",function(a){var b=a.keyCode||a.which;if(32===b||13===b)"up"!==g&&(p(),u()),a.preventDefault()});l.on("keyup",function(a){a=a.keyCode||a.which;32!==a&&13!==a||f()});h.on("mousedown.touchspin",function(a){h.off("touchstart.touchspin");c.is(":disabled")||(q(),v(),a.preventDefault(),
      a.stopPropagation())});h.on("touchstart.touchspin",function(a){h.off("mousedown.touchspin");c.is(":disabled")||(q(),v(),a.preventDefault(),a.stopPropagation())});l.on("mousedown.touchspin",function(a){l.off("touchstart.touchspin");c.is(":disabled")||(p(),u(),a.preventDefault(),a.stopPropagation())});l.on("touchstart.touchspin",function(a){l.off("mousedown.touchspin");c.is(":disabled")||(p(),u(),a.preventDefault(),a.stopPropagation())});l.on("mouseout touchleave touchend touchcancel",function(a){g&&
  (a.stopPropagation(),f())});h.on("mouseout touchleave touchend touchcancel",function(a){g&&(a.stopPropagation(),f())});h.on("mousemove touchmove",function(a){g&&(a.stopPropagation(),a.preventDefault())});l.on("mousemove touchmove",function(a){g&&(a.stopPropagation(),a.preventDefault())});e(document).on(t(["mouseup","touchend","touchcancel"],n).join(" "),function(a){g&&(a.preventDefault(),f())});e(document).on(t(["mousemove","touchmove","scroll","scrollstart"],n).join(" "),function(a){g&&(a.preventDefault(),
      f())});c.on("mousewheel DOMMouseScroll",function(a){if(b.mousewheel&&c.is(":focus")){var d=a.originalEvent.wheelDelta||-a.originalEvent.deltaY||-a.originalEvent.detail;a.stopPropagation();a.preventDefault();0>d?q():p()}})}function L(){c.on("touchspin.uponce",function(){f();p()});c.on("touchspin.downonce",function(){f();q()});c.on("touchspin.startupspin",function(){u()});c.on("touchspin.startdownspin",function(){v()});c.on("touchspin.stopspin",function(){f()});c.on("touchspin.updatesettings",function(a,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               c){b=e.extend({},b,c);w();var d=m.val();""!==d&&(d=Number(m.val()),m.val(d.toFixed(b.decimals)))})}function M(a){switch(b.forcestepdivisibility){case "round":return(Math.round(a/b.step)*b.step).toFixed(b.decimals);case "floor":return(Math.floor(a/b.step)*b.step).toFixed(b.decimals);case "ceil":return(Math.ceil(a/b.step)*b.step).toFixed(b.decimals);default:return a}}function w(){var a,d,e;a=c.val();""===a?""!==b.replacementval&&(c.val(b.replacementval),c.trigger("change")):0<b.decimals&&"."===a||(d=
    parseFloat(a),isNaN(d)&&(d=""!==b.replacementval?b.replacementval:0),e=d,d.toString()!==a&&(e=d),d<b.min&&(e=b.min),d>b.max&&(e=b.max),e=M(e),Number(a).toString()!==e.toString()&&(c.val(e),c.trigger("change")))}function B(){if(b.booster){var a=Math.pow(2,Math.floor(r/b.boostat))*b.step;b.maxboostedstep&&a>b.maxboostedstep&&(a=b.maxboostedstep,d=Math.round(d/a)*a);return Math.max(b.step,a)}return b.step}function p(){w();d=parseFloat(m.val());isNaN(d)&&(d=0);var a=d,e=B();d+=e;d>b.max&&(d=b.max,c.trigger("touchspin.on.max"),
    f());m.val(Number(d).toFixed(b.decimals));a!==d&&c.trigger("change")}function q(){w();d=parseFloat(m.val());isNaN(d)&&(d=0);var a=d,e=B();d-=e;d<b.min&&(d=b.min,c.trigger("touchspin.on.min"),f());m.val(d.toFixed(b.decimals));a!==d&&c.trigger("change")}function v(){f();r=0;g="down";c.trigger("touchspin.on.startspin");c.trigger("touchspin.on.startdownspin");C=setTimeout(function(){D=setInterval(function(){r++;q()},b.stepinterval)},b.stepintervaldelay)}function u(){f();r=0;g="up";c.trigger("touchspin.on.startspin");
  c.trigger("touchspin.on.startupspin");E=setTimeout(function(){F=setInterval(function(){r++;p()},b.stepinterval)},b.stepintervaldelay)}function f(){clearTimeout(C);clearTimeout(E);clearInterval(D);clearInterval(F);switch(g){case "up":c.trigger("touchspin.on.stopupspin");c.trigger("touchspin.on.stopspin");break;case "down":c.trigger("touchspin.on.stopdownspin"),c.trigger("touchspin.on.stopspin")}r=0;g=!1}var b,c=e(this);x=c.data();var k,d,D,F,C,E,r=0,g=!1;c.data("alreadyinitialized")||(c.data("alreadyinitialized",
    !0),n+=1,c.data("spinnerid",n),c.is("input")?(b=e.extend({},G,x,I(),z),""!==b.initval&&""===c.val()&&c.val(b.initval),w(),J(),h=e(".bootstrap-touchspin-down",k),l=e(".bootstrap-touchspin-up",k),m=e("input",k),x=e(".bootstrap-touchspin-prefix",k).addClass(b.prefix_extraclass),A=e(".bootstrap-touchspin-postfix",k).addClass(b.postfix_extraclass),""===b.prefix&&x.hide(),""===b.postfix&&A.hide(),K(),L(),m.css("display","block")):console.log("Must be an input."))})}}})(jQuery);